
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>JarKus MKL calculations</title>
      <meta name="generator" content="MATLAB 7.6">
      <meta name="date" content="2009-12-21">
      <meta name="m-file" content="jarkus_tutorial_calculate_MKL">
      <link type="text/css" href="script/css/jquery-ui-1.7.2.custom.css" rel="stylesheet">
      <link type="text/css" href="script/css/jquery.collapsible.css" rel="stylesheet"><script type="text/javascript" src="script/js/jquery-1.3.2.min.js"></script><script type="text/javascript" src="script/js/jquery-ui-1.7.2.custom.min.js"></script><script type="text/javascript" src="script/js/matlab2collapsible.js"></script><script type="text/javascript" src="script/js/jquery.collapsible.js"></script><script type="text/javascript" src="script/js/matlabhelp.js"></script><script src="http://www.google.com/jsapi?key=ABQIAAAA9KO06BPsmsvzw4PogoawhRRxYg1slSMvxuda9W0Kolc-SbeLlhQGHwE9W-XlCfe8WtZh74R56zOChQ"></script><script type="text/javascript" src="script/js/googleEarthApi.js"></script><script type="text/javascript">
    $(document).ready(function ()
      {
        // Copy content
	copycontent();

	// validate href of links to matlab tutorials
	matlabpreparehelprefs();

  	// Accordion
  	collapsible($(".collapsible"));
	
	// googleearth($(".geapi"));
	currentGeApiDiv = $(".geapi");	
      });
    </script><link type="text/css" href="script/css/matlabcode.css" rel="stylesheet">
   </head>
   <body LINK="#48339F" VLINK="#48339F" ALINK="#48339F">
      <div class="content">
         <div class="introduction ui-widget ui-widget-content ui-corner-all">
            <h1>JarKus MKL calculations</h1>
            <div>
               <p>This tutorial demonstrates how to calculate the MKL for a JarKus profile</p>
            </div>
            <h2>Contents</h2>
            <div>
               <ul>
                  <li><a href="#1">Read data</a></li>
                  <li><a href="#3">Calculating the MKL</a></li>
               </ul>
            </div>
         </div>
         <div class="collapsible">
            <div>
               <h2><a name="1">Read data</a></h2>
               <div>
                  <p>See the JarKus tutorial on reading data for a detailed explanation of this</p><pre class="codeinput">url         = jarkus_url;
id          = nc_varget(url,<span class="string">'id'</span>);
transect_nr = find(id==6001200)-1;
year        = 1970 + floor(nc_varget(url,<span class="string">'time'</span>)/365);
year_nr     = find(year == 1969)-1;
xRSP        = nc_varget(url,<span class="string">'cross_shore'</span>);
z           = nc_varget(url,<span class="string">'altitude'</span>,[year_nr,transect_nr,0],[1,1,-1]);
x           = xRSP(~isnan(z));
z           =    z(~isnan(z));
</pre></div>
            </div>
            <div>
               <div>
                  <p>As we want to calculate the MKL position, we need information on the mean low water level. The upper boundary is the dune
                     foot position defined as the 3m NAP line
                  </p><pre class="codeinput">MLW = nc_varget(url, <span class="string">'mean_low_water'</span>,transect_nr,1)
</pre><pre class="codeoutput">
MLW =

   NaN

</pre></div>
            </div>
            <div>
               <h2><a name="3">Calculating the MKL</a></h2>
               <div>
                  <p>To find out what JarKus funtions are available, just enter 'jarkus' in the command prompt or text editor and press tab. Matlab
                     gives suggestions to complete the line. To figure out how the funtion works use help.
                  </p><pre class="codeinput">help <span class="string">jarkus</span>
</pre><pre class="codeoutput">Contents of jarkus:

jarkus_areaName2AreaCode       - returns jarkus area code of selected jarkus area name
jarkus_createtransectstruct    - create jarkus transect struct
jarkus_deriveCurvature         - Derives the coastal curvature from JARKUS data
jarkus_deriveCurvature_test    - Test function for jarkus_deriveCurvature function
jarkus_findCrossings           - routine to find crossings of 2 profiles
jarkus_getBKL                  - gets BKL values based on transectID
jarkus_getMKL                  - returns the cross shore coordinate of the volume based coastal indicator MKL 
jarkus_getTKL                  - returns the cross shore coordinate of the TKL (te toetsen kustlijn)
jarkus_getVolume               - generic routine to determine volumes on transects
jarkus_getVolumeFast           - generic routine to determine volumes on transects
jarkus_grid2netcdf             - converts Jarkus grid struct to netCDF-CF file
jarkus_netcdf2grid             - converts netCDF-CF file to Jarkus grid struct
jarkus_plot_in_googleEarth     - plot one or more jarkus transects in google Earth
jarkus_readTransectDataNetcdf  - create transect structure out of jarkus netcdf file
jarkus_transect2grid           - converts Jarkus transect struct to Jarkus grid struct
jarkus_transect2netcdf         - converts Jarkus transect struct to netCDF-CF file
jarkus_transect2oldtransect    - converts Jarkus transect struct
jarkus_tutorial_calculate_MKL  - JarKus MKL calculations
jarkus_tutorial_calculate_volume - JarKus volume calculations
jarkus_tutorial_coordinates_RSP_2_RD - Coordinate conversion from RSP to RD
jarkus_tutorial_plot_in_googleEarth - Jarkus &amp; Google Earth
jarkus_tutorial_reading_data_1 - Extracting JarKus data from netCDF (1)
jarkus_tutorial_reading_data_2 - Extracting JarKus data from netCDF (2)
jarkus_updategrid              - update Jarkus grid struct
jarkus_url                     - returns the link to the jarkus netCDF. 
jarkus_url_grid                - returns the links to the jarkus grid netCDF's. 

</pre></div>
            </div>
            <div>
               <div>
                  <p>jarkus_getMKL will do the job</p><pre class="codeinput">UpperBoundary = 3;
LowerBoundary = MLW-(3-MLW);
xMKL = jarkus_getMKL(x,z,UpperBoundary,LowerBoundary,<span class="string">'plot'</span>)
</pre><pre class="codeoutput">Warning: NaN found in Y, interpolation at undefined values
	 will result in undefined values.
Warning: NaN found in Y, interpolation at undefined values
	 will result in undefined values.
Warning: transect does not cross LowerBoundary

xMKL =

   NaN

</pre></div>
            </div>
         </div>
         <p class="footer"><br>
            this tutorial is based on: <a class="matlabhref" href="matlab:edit('jarkus_tutorial_calculate_MKL');" browserhref="http://crucible.delftgeosystems.nl/browse/~raw,r=2096/OpenEarthTools/trunk/matlab/applications/Rijkswaterstaat/jarkus/jarkus_tutorial_calculate_MKL.m">jarkus_tutorial_calculate_MKL.m (revision: 2096)</a><br>
Published with MATLAB&reg; 7.6<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
%% JarKus MKL calculations
% This tutorial demonstrates how to calculate the MKL for a JarKus profile

%% Read data
% See the JarKus tutorial on reading data for a detailed explanation of
% this

url         = jarkus_url;
id          = nc_varget(url,'id');
transect_nr = find(id==6001200)-1;
year        = 1970 + floor(nc_varget(url,'time')/365);
year_nr     = find(year == 1969)-1;
xRSP        = nc_varget(url,'cross_shore');
z           = nc_varget(url,'altitude',[year_nr,transect_nr,0],[1,1,-1]);
x           = xRSP(~isnan(z));
z           =    z(~isnan(z));

%%
% As we want to calculate the MKL position, we need information on the mean
% low water level. The upper boundary is the dune foot position defined as the 3m
% NAP line

MLW = nc_varget(url, 'mean_low_water',transect_nr,1)

%% Calculating the MKL
% To find out what JarKus funtions are available, just enter 'jarkus' in 
% the command prompt or text editor and press tab. Matlab gives suggestions
% to complete the line. To figure out how the funtion works use help.

help jarkus

%% 
% jarkus_getMKL will do the job

UpperBoundary = 3;
LowerBoundary = MLW-(3-MLW);
xMKL = jarkus_getMKL(x,z,UpperBoundary,LowerBoundary,'plot')
##### SOURCE END #####
-->
   </body>
</html>