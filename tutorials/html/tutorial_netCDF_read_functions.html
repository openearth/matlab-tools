
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>Reading a netCDF file</title>
      <meta name="generator" content="MATLAB 7.8">
      <meta name="date" content="2009-09-11">
      <meta name="m-file" content="tutorial_netCDF_read_functions">
      <link type="text/css" href="script/css/jquery-ui-1.7.2.custom.css" rel="stylesheet"><script type="text/javascript" src="script/js/jquery-1.3.2.min.js"></script><script type="text/javascript" src="script/js/jquery-ui-1.7.2.custom.min.js"></script><script type="text/javascript" src="script/js/matlab2accordion.js"></script><script type="text/javascript">
  	$(document).ready(function ()
  	{
  	// Copy content
	copycontent();

  	// Accordion
  	$(".accordion").accordion({ header: "h2" });
	$(".accordion").accordion('option', 'autoHeight', false);
	$(".accordion").accordion('option', 'collapsible', true);
	$(".accordion").accordion('activate',false);
	$(".accordion").accordion('option', 'clearStyle', true);
  	});
    </script><style>

pre.codeinput {
  overflow-x: auto;
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #9F1EF4}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  overflow-x: auto;
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

#contents {
  border-style:solid;
  border-width:1px;
}

  </style></head>
   <body LINK="#48339F" VLINK="#48339F" ALINK="#48339F">
      <div class="content">
         <div class="introduction ui-widget ui-widget-content ui-corner-all">
            <h1>Reading a netCDF file</h1>
            <div>
               <p>Someone should finish this tutorial. It still looks like nothing....</p>
            </div>
         </div>
         <div class="accordion">
            <div>
               <h2><a>Basics of netCDF files</a></h2>
               <div><pre class="codeinput"><span class="comment">% Visit a link, any suggestions?</span>
</pre></div>
            </div>
            <div>
               <h2><a>Locating a data file on the internet</a></h2>
               <div>
                  <p>To locate a netCDF data file, browse to an OPeNDAP website, as e.g. the OpenEarth website:</p>
               </div>
            </div>
            <div>
               <div>
                  <p><a href="http://OPeNDAP.deltares.nl:8080">http://OPeNDAP.deltares.nl:8080</a></p>
               </div>
            </div>
            <div>
               <div>
                  <p>Find the Jarkus netCDF file by clicking on the following links: HYRAX ==&gt; Rijkswaterstaat ==&gt; JarKus ==&gt; transects. Click
                     on the link to the file and extract the direct link to the JarKus netCDF data file.
                  </p><pre class="codeinput">url = <span class="string">'http://OPeNDAP .deltares.nl:8080/OPeNDAP/rijkswaterstaat/jarkus/profiles/transect.nc'</span>;
</pre></div>
            </div>
            <div>
               <div>
                  <p>For some frequently used filetypes a dedicated funtion exists. This has the advantage that it returns the link to the netCDF
                     file on the Deltares network if it is available. This is faster than accessing data over the internet.
                  </p><pre class="codeinput">url = jarkus_url;
</pre></div>
            </div>
            <div>
               <h2><a>Interacting with a netCDF file</a></h2>
               <div>
                  <p>To let matlab talk with a netCDF file, the snc toolbox has been developed. See what is in there:</p><pre class="codeinput">help <span class="string">snctools</span>
</pre><pre class="codeoutput">  SNC NetCDF toolbox (&lt;a href="http://mexcdf.sourceforge.net/"&gt;http://mexcdf.sourceforge.net/&lt;/a&gt;).
 
  SNCTools uses the the C (mexnc), java interface (toolsUI-2.2.22.jar) or Matlab (2008b+) 
  low-level netCDF interface. You can switch with the following preference:
  setpref ('SNCTOOLS', 'USE_JAVA', true/false);
 
  NC_ADDHIST         - Either appends or constructs a history attribute.
  NC_ADD_DIMENSION   - adds a dimension to an existing netcdf file
  NC_ADDHIST         - Either appends or constructs a history attribute.
  NC_ADDNEWRECS      - Tacks on new data from simple matlab structure to an unlimited-dimension netcdf file
  NC_ADD_RECS        - add records onto the end of a netcdf file
  NC_ADDVAR          - adds a variable to a NetCDF file
  NC_ATTGET          - Get the values of a NetCDF attribute.
  NC_ATTPUT          - put an attribute into a netcdf file
  NC_CAT_A           - concatentates a set of netcdf files into ascending order
...</pre></div>
            </div>
            <div>
               <div>
                  <p>Important functions are nc_varget and nc_dump</p><pre class="codeinput">help <span class="string">nc_dump</span>
</pre><pre class="codeoutput">  NC_DUMP:  a Matlab counterpart to the NetCDF utility 'ncdump'.
      NC_DUMP(NCFILE) prints metadata about the netCDF file NCFILE.  
      NC_DUMP(NCFILE,VARNAME) prints metadata about just the one netCDF variable
      named VARNAME.
 

</pre></div>
            </div>
            <div>
               <div><pre class="codeinput">help <span class="string">nc_varget</span>
</pre><pre class="codeoutput">  NC_VARGET  Retrieve data from a netCDF variable (zero-based indices!).
 
  DATA = NC_VARGET(NCFILE,VARNAME) retrieves all the data from the 
  variable VARNAME in the netCDF file NCFILE.
 
  DATA = NC_VARGET(NCFILE,VARNAME,START,COUNT) retrieves the contiguous
  portion of the variable specified by the index vectors START and 
  COUNT.  Remember that SNCTOOLS indexing is zero-based, not 
  one-based.  Specifying a -1 in COUNT means to retrieve everything 
  along that dimension from the START coordinate.
 
  DATA = NC_VARGET(NCFILE,VARNAME,START,COUNT,STRIDE) retrieves 
  a non-contiguous portion of the dataset.  The amount of
  skipping along each dimension is given through the STRIDE vector.
 
...</pre></div>
            </div>
            <div>
               <h2><a>View metadata</a></h2>
               <div>
                  <p>We can get data from this file using the function nc_varget. But first, let's see what is in the file using nc_dump. nc_dump
                     shows all the metadata in the file. In the case of the JarKus file this is a lot.
                  </p><pre class="codeinput">nc_dump(url)
</pre><pre class="codeoutput">netcdf P:\mcdata\opendap\rijkswaterstaat\jarkus\profiles\transect.nc { 

dimensions:
	time = UNLIMITED ; (44 currently)
	alongshore = 2178 ;
	cross_shore = 1925 ;
	stringsize = 100 ;


variables:
	long id(alongshore), shape = [2178]
		id:long_name = "identifier" 
		id:comment = "sum of area code (x1000000) and alongshore coordinate" 
	long areacode(alongshore), shape = [2178]
		areacode:long_name = "area code" 
...</pre></div>
            </div>
            <div>
               <div>
                  <p>From the metadata we can see that there is a field 'id'. To get this data, use nc_varget.</p><pre class="codeinput">id = nc_varget(url,<span class="string">'id'</span>)
</pre><pre class="codeoutput">
id =

     2000100
     2000101
     2000102
     2000103
     2000104
     2000105
     2000106
     2000120
     2000140
     2000160
     2000180
     2000200
...</pre></div>
            </div>
            <div>
               <h2><a>Zero based indexing</a></h2>
               <div></div>
            </div>
            <div>
               <h2><a>Stride</a></h2>
               <div></div>
            </div>
            <div>
               <h2><a>netCDF viewers</a></h2>
               <div></div>
            </div>
         </div>
         <p class="footer"><br>
            Published with MATLAB&reg; 7.8<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Reading a netCDF file
% Someone should finish this tutorial. It still looks like nothing....

%% Basics of netCDF files

% Visit a link, any suggestions?

%% Locating a data file on the internet
% To locate a netCDF data file, browse to an OPeNDAP website, as e.g. the
% OpenEarth website:
%%
% <http://OPeNDAP.deltares.nl:8080> 

%% 
% Find the Jarkus netCDF file by clicking on the following links:
% HYRAX ==> Rijkswaterstaat ==> JarKus ==> transects.
% Click on the link to the file and extract the direct link to the JarKus
% netCDF data file. 

url = 'http://OPeNDAP .deltares.nl:8080/OPeNDAP/rijkswaterstaat/jarkus/profiles/transect.nc';

%%
% For some frequently used filetypes a dedicated funtion exists. This has 
% the advantage that it returns the link to the netCDF file on the Deltares
% network if it is available. This is faster than accessing data over the
% internet. 

url = jarkus_url;

%% Interacting with a netCDF file
% To let matlab talk with a netCDF file, the snc toolbox has been
% developed. See what is in there:

help snctools

%%
% Important functions are nc_varget and nc_dump

help nc_dump   
%% 

help nc_varget

%% View metadata
% We can get data from this file using the function nc_varget. But first, let's see what
% is in the file using nc_dump. nc_dump shows all the metadata in the file.
% In the case of the JarKus file this is a lot.

nc_dump(url)

%% 
% From the metadata we can see that there is a field 'id'. To get this
% data, use nc_varget.

id = nc_varget(url,'id')

%% Zero based indexing

%% Stride

%% netCDF viewers

##### SOURCE END #####
-->
   </body>
</html>