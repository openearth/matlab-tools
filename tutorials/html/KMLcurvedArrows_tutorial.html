
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>Animated arrows</title>
      <meta name="generator" content="MATLAB 7.6">
      <meta name="date" content="2009-12-18">
      <meta name="m-file" content="KMLcurvedArrows_tutorial">
      <link type="text/css" href="script/css/jquery-ui-1.7.2.custom.css" rel="stylesheet">
      <link type="text/css" href="script/css/jquery.collapsible.css" rel="stylesheet"><script type="text/javascript" src="script/js/jquery-1.3.2.min.js"></script><script type="text/javascript" src="script/js/jquery-ui-1.7.2.custom.min.js"></script><script type="text/javascript" src="script/js/matlab2collapsible.js"></script><script type="text/javascript" src="script/js/jquery.collapsible.js"></script><script type="text/javascript" src="script/js/matlabhelp.js"></script><script src="http://www.google.com/jsapi?key=ABQIAAAA9KO06BPsmsvzw4PogoawhRRxYg1slSMvxuda9W0Kolc-SbeLlhQGHwE9W-XlCfe8WtZh74R56zOChQ"></script><script type="text/javascript" src="script/js/googleEarthApi.js"></script><script type="text/javascript">
    $(document).ready(function ()
      {
        // Copy content
	copycontent();

	// validate href of links to matlab tutorials
	matlabpreparehelprefs();

  	// Accordion
  	collapsible($(".collapsible"));
	
	// googleearth($(".geapi"));
	currentGeApiDiv = $(".geapi");	
      });
    </script><style>

pre.codeinput {
  overflow-x: auto;
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
}

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #9F1EF4}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  overflow-x: auto;
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

#contents {
  border-style:solid;
  border-width:1px;
}

  </style></head>
   <body LINK="#48339F" VLINK="#48339F" ALINK="#48339F">
      <div class="content">
         <div class="introduction ui-widget ui-widget-content ui-corner-all">
            <h1>Animated arrows</h1>
            <div>
               <p>This tutorail shows how to make animated arrows.</p>
            </div>
            <h2>Contents</h2>
            <div>
               <ul>
                  <li><a href="#1">Get some data</a></li>
                  <li><a href="#4">Make the arrows</a></li>
               </ul>
            </div>
         </div>
         <div class="collapsible">
            <div>
               <h2><a name="1">Get some data</a></h2>
               <div>
                  <p>To make animated arrwos, you need x, y, u and v data. From a Delt3D trimfile, this usually can be obtained with the following
                     code:
                  </p>
               </div>
            </div>
            <div>
               <div>
                  <p><tt>trimfile = vs_use('TRIMFILE_NAME.dat'); G.maskcor  = vs_get(trimfile,'TEMPOUT'  ,'CODB'); G.maskcor(G.maskcor==-1)=nan; x
                        = vs_get(trimfile,'map-const','XCOR','quiet').*G.maskcor; y = vs_get(trimfile,'map-const','YCOR','quiet').*G.maskcor; for
                        ii = 1:27;[x,y,u0{ii},v0{ii}] = xyveloc(trimfile,ii);end</tt></p>
               </div>
            </div>
            <div>
               <div>
                  <p>For this demo, there is alrady some data in OpenEarthTools</p><pre class="codeinput">load <span class="string">westerscheldeDemoData</span>
whos
</pre><pre class="codeoutput">  Name        Size                Bytes  Class     Attributes

  u0          1x27             75739860  cell                
  v0          1x27             75739860  cell                
  x         487x720             2805120  double              
  y         487x720             2805120  double              

</pre></div>
            </div>
            <div>
               <h2><a name="4">Make the arrows</a></h2>
               <div>
                  <p>Use KMLcurvedArrows to generate the arrows. 'time' contains the begin and end time of our animation. Only the first two time
                     steps are rendered for this example. Feel free to adjust the inputs!
                  </p><pre class="codeinput">fname = <span class="string">'movingArrows.kml'</span>;
time  = [datenum(<span class="string">'11-Feb-2008 09:30:00'</span>) datenum(<span class="string">'11-Feb-2008 10:00:00'</span>)];

KMLcurvedArrows(x,y,u0(1:2),v0(1:2),<span class="string">'time'</span>,time,<span class="keyword">...</span>
    <span class="string">'n_arrows'</span>,500,<span class="string">'fileName'</span>,fname,<span class="string">'interp_steps'</span>,2);
</pre><pre class="codeoutput">arrows001 done
arrows002 done
arrows003 done
</pre></div>
            </div>
            <div>
               <div>
                  <p><img vspace="5" hspace="5" src="prerendered_images/KML_movingArrows1.jpg" relsrc="prerendered_images/KML_movingArrows1.jpg"> </p>
               </div>
            </div>
         </div>
         <p class="footer"><br>
            this tutorial is based on: <a class="matlabhref" href="matlab:edit('KMLcurvedArrows_tutorial');" browserhref="http://crucible.delftgeosystems.nl/browse/~raw,r=2078/OpenEarthTools/trunk/matlab/applications/googleplot/KMLcurvedArrows_tutorial.m">KMLcurvedArrows_tutorial.m (revision: 2078)</a><br>
Published with MATLAB&reg; 7.6<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Animated arrows
% This tutorail shows how to make animated arrows. 

%% Get some data
% To make animated arrwos, you need x, y, u and v data. 
% From a Delt3D trimfile, this usually can be obtained with the following code:

%%
% |trimfile = vs_use('TRIMFILE_NAME.dat');
% G.maskcor  = vs_get(trimfile,'TEMPOUT'  ,'CODB'); G.maskcor(G.maskcor==-1)=nan;
% x = vs_get(trimfile,'map-const','XCOR','quiet').*G.maskcor;
% y = vs_get(trimfile,'map-const','YCOR','quiet').*G.maskcor;
% for ii = 1:27;[x,y,u0{ii},v0{ii}] = xyveloc(trimfile,ii);end|

%% 
% For this demo, there is alrady some data in OpenEarthTools

load westerscheldeDemoData
whos

%%  Make the arrows
% Use KMLcurvedArrows to generate the arrows. 'time' contains the begin and
% end time of our animation. Only the first two time steps are rendered for 
% this example. Feel free to adjust the inputs!

fname = 'movingArrows.kml';
time  = [datenum('11-Feb-2008 09:30:00') datenum('11-Feb-2008 10:00:00')];

KMLcurvedArrows(x,y,u0(1:2),v0(1:2),'time',time,...
    'n_arrows',500,'fileName',fname,'interp_steps',2);

%%
% 
% <<prerendered_images/KML_movingArrows1.jpg>>
% 
##### SOURCE END #####
-->
   </body>
</html>