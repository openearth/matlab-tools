
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>3. Running individual tests</title>
      <meta name="generator" content="MATLAB 7.10">
      <meta name="date" content="2010-06-22">
      <meta name="m-file" content="runningatest_tutorial">
      <link type="text/css" href="script/css/jquery-ui-1.7.2.custom.css" rel="stylesheet">
      <link type="text/css" href="script/css/jquery.collapsible.css" rel="stylesheet"><script type="text/javascript" src="script/js/jquery-1.3.2.min.js"></script><script type="text/javascript" src="script/js/jquery-ui-1.7.2.custom.min.js"></script><script type="text/javascript" src="script/js/matlab2collapsible.js"></script><script type="text/javascript" src="script/js/jquery.collapsible.js"></script><script type="text/javascript" src="script/js/matlabhelp.js"></script><script src="http://www.google.com/jsapi?key=ABQIAAAA9KO06BPsmsvzw4PogoawhRRxYg1slSMvxuda9W0Kolc-SbeLlhQGHwE9W-XlCfe8WtZh74R56zOChQ"></script><script type="text/javascript" src="script/js/googleEarthApi.js"></script><script type="text/javascript">
    $(document).ready(function ()
      {
        // Copy content
	copycontent();

	// validate href of links to matlab tutorials
	matlabpreparehelprefs();

  	// Accordion
  	collapsible($(".collapsible"));
	
	// googleearth($(".geapi"));
	currentGeApiDiv = $(".geapi");	
      });
    </script><link type="text/css" href="script/css/matlabcode.css" rel="stylesheet">
   </head>
   <body LINK="#48339F" VLINK="#48339F" ALINK="#48339F">
      <div class="content">
         <div class="introduction ui-widget ui-widget-content ui-corner-all">
            <h1>3. Running individual tests</h1>
            <div>
               <p>Once we have generated a testdefinition we would like to run a test. In general there are three ways to run a test and optionally
                  publish the documentation. This tutorial describes these three ways.
               </p>
               <p>
                  <a class="relref" href="tutorial_automatedtesting.html" relhref="tutorial_automatedtesting.html">Read more about automated
                  testing</a>
                  
               </p>
            </div>
            <h2>Contents</h2>
            <div>
               <ul>
                  <li><a href="#1">Command line execution</a></li>
                  <li><a href="#3">Run a test with the MTest toolbox</a></li>
                  <li><a href="#8">Run a test with the MTestRunner</a></li>
               </ul>
            </div>
         </div>
         <div class="collapsible">
            <div>
               <h2><a name="1">Command line execution</a></h2>
               <div>
                  <p>Testdefinitions are designed in such a way that simply running the function from the command line will evaulate the test.
                     If the test is not successfull it should crash when running command line, providing error information on what went wrong in
                     which file.
                  </p>
                  <p>Example:</p><pre class="codeinput">mte_simple_test;
</pre></div>
            </div>
            <div>
               <div>
                  <p><b>Advantage</b></p>
                  <p>One command leads to an immediate testresult. This method is therefore suitable for obtaining a quick look at the current
                     state of the functions that are tested by this testdefinition.
                  </p>
                  <p><b>Disadvantage</b></p>
                  <p>It is not possible to print either documentation or vizualisation of the result with one command.</p>
               </div>
            </div>
            <div>
               <h2><a name="3">Run a test with the MTest toolbox</a></h2>
               <div>
                  <p>A testdefinition can also be run with the use of the mtest toolbox. To do this first an instance of an mtest object must be
                     created.
                  </p><pre class="codeinput">t = MTest(<span class="string">'mte_simple_test'</span>);
</pre></div>
            </div>
            <div>
               <div>
                  <p>This object contains all information from the testdefinition in the property fields (fields like a struct). Several functions
                     can be applied to this object.
                  </p>
                  <p>For example run the test:</p><pre class="codeinput">run(t);
</pre><pre class="codeoutput">     Test started: mte_simple_test
     Test finished: mte_simple_test
</pre></div>
            </div>
            <div>
               <div>
                  <p>The testresult is now stored in the field: "TestResult":</p><pre class="codeinput">t.TestResult
</pre><pre class="codeoutput">
ans =

     1

</pre></div>
            </div>
            <div>
               <div>
                  <p>With the same object it is also possible to publish the description and result (if specified in the test definition):</p><pre class="codeinput">t.Publish = true;
t.run;
</pre><pre class="codeoutput">     Test started: mte_simple_test
     Test finished: mte_simple_test
</pre></div>
            </div>
            <div>
               <div>
                  <p><b>Advantage</b></p>
                  <ul>
                     <li>With this method additional to running the test, the documentation can also be generated. It</li>
                     <li>requires a relatively small effort.</li>
                  </ul>
                  <p><b>Disadvantage</b></p>
                  <ul>
                     <li>he testdefinition must be converted to an object before it can be run or published. Compared to command line usage this increases
                        the amount of actions that must be undertaken.
                     </li>
                     <li>Next to that, the mtest toolbox is programmed with the use of object oriented programming as introduced with Matlab version
                        7.4 (2008a). This method cannot be used with matlab versions prior to 2008a.
                     </li>
                  </ul>
               </div>
            </div>
            <div>
               <h2><a name="8">Run a test with the MTestRunner</a></h2>
               <div>
                  <p>The third way to run a test is with the use of the MTestRunner that is also used to scan the toolbox for testdefinitions and
                     automatically run them. This is done in the same way as with the mtest object:
                  </p>
                  <p>Create an mtestengine object</p><pre class="codeinput">mtr = MTestRunner(<span class="string">'Template'</span>,<span class="string">'oet'</span>);
</pre></div>
            </div>
            <div>
               <div>
                  <p>More information about calling MTestRunner:</p><pre class="codeinput">help <span class="string">MTestRunner</span>
</pre><pre class="codeoutput">  MTESTRUNNER - Object to autmatically run tests in a toolbox
 
  The mtest object is designed to run and publish a large amount of tests. Based on a main
  directory it can assamble all tests in the dir (and/or subdir if specified) and convert the
  test definition files to mtest objects. With its methods run and runAndPublish the tests can
  be run as well.
 
  Publishing the results is done based on a template (which is the default deltares template if
  not specified and created).
 
  See also MTestRunner.MTestRunner MTestRunner.cataloguetests MTestRunner.run MTest TeamCity

</pre></div>
            </div>
            <div>
               <div>
                  <p>For automatic running test the engine can look for all tests in a particular maindir:</p><pre class="codeinput">help <span class="string">MTestRunner.cataloguetests</span>
</pre><pre class="codeoutput"> CATALOGUETESTS  Lists all tests in the maindir of the mtestobject and converts them to mtest objects.
 
    This function lists all files in the maindir (and subdirs if recursive = true) of an
    mtestobject. Test or directory names that contain one of the exclusion strings are
    not taken into account. For each test an mtest object is created and stored in the
    mtestengine object.
 
    Syntax:
    outobj = obj.catalogueTests;
    outobj = catalogueTests(obj);
 
    Input:
    obj     -   an mtestengine object.
 
    Output:
    outobj  -   The same mtestengine object, but with mtest objects for all tests in the
                maindir. It is not necessary to have an output, since the mtestengine is
                of type handle. This automatically adjusts all copies of the object that
                are in the matlab memory. The one that is in the base workspace is
                therefore automatically updated and does not need to be output of the
                function.
 
    See also mtestengine mtestengine.mtestengine mtestengine.run mtestengine.runAndPublish mtest mtestcase

</pre></div>
            </div>
            <div>
               <div>
                  <p>We only want to execute one test, so we add this to the tests in the MTestRunner object:</p><pre class="codeinput">mtr.Tests(1) = MTest(<span class="string">'mte_simple_test'</span>);
</pre></div>
            </div>
            <div>
               <div>
                  <p>Now we can use the run command to run the test and publish the result.</p><pre class="codeinput">help <span class="string">MTestRunner.run</span>
</pre><pre class="codeoutput"> RUN  Runs all tests (that are in the "Test" property)
 
    This function executes the run function of all mtest objects in the Tests property.
 
    TODO:
        - include input argument to specify test numbers (instead of just all tests).
 
    Syntax:
    outobj = obj.run;
    outobj = run(obj);
 
    Input:
    obj     -   an MTestRunner object.
 
    Output:
    outobj  -   The same MTestRunner object as the input argument obj. It is not 
                necessary to have an output, since the MTestRunner is of type handle. 
                This automatically adjusts all copies of the object that are in the 
                matlab memory. The one that is in the base workspace is therefore 
                automatically updated and does not need to be output of the function.
 
    See also MTestRunner MTestRunner.MTestRunner MTestRunner.run MTest MTestFactory TeamCity

</pre></div>
            </div>
            <div>
               <div>
                  <p>TODO: simple method to directly load multiple tests in the MTestRunner TODO: simple method to print a summary of the test
                     info to the command window after running
                  </p>
               </div>
            </div>
         </div>
         <p class="footer"><br>
            this tutorial is based on: <a class="matlabhref" href="matlab:edit('runningatest_tutorial');" browserhref="http://crucible.delftgeosystems.nl/browse/~raw,r=2703/OpenEarthTools/trunk/matlab/maintenance/1_automated_Testing/runningatest_tutorial.m">runningatest_tutorial.m (revision: 2703)</a><br>
Published with MATLAB&reg; 7.10<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
%% 3. Running individual tests
% Once we have generated a testdefinition we would like to run a test. In general there are three 
% ways to run a test and optionally publish the documentation. This
% tutorial describes these three ways.
%
% <html>
% <a class="relref" href="tutorial_automatedtesting.html" relhref="tutorial_automatedtesting.html">Read more about automated testing</a>
% </html>

%% Command line execution
% Testdefinitions are designed in such a way that simply running the function from the command line
% will evaulate the test. If the test is not successfull it should crash when running command line,
% providing error information on what went wrong in which file.
%
% Example:

mte_simple_test;

%%
% *Advantage*
%
% One command leads to an immediate testresult. This method is therefore suitable for obtaining a
% quick look at the current state of the functions that are tested by this testdefinition.
%
% *Disadvantage*
%
% It is not possible to print either documentation or vizualisation of the result with one command.

%% Run a test with the MTest toolbox
% A testdefinition can also be run with the use of the mtest toolbox. To do this first an instance
% of an mtest object must be created.

t = MTest('mte_simple_test');

%%
% This object contains all information from the testdefinition in the property fields (fields like a
% struct). Several functions can be applied to this object.
%
% For example run the test:

run(t);

%%
% The testresult is now stored in the field: "TestResult":

t.TestResult

%%
% With the same object it is also possible to publish the description and result (if specified in the test definition):

t.Publish = true;
t.run;

%%
% *Advantage*
%
% * With this method additional to running the test, the documentation can also be generated. It
% * requires a relatively small effort.
%
% *Disadvantage*
%
% * he testdefinition must be converted to an object before it can be run or published. Compared to
% command line usage this increases the amount of actions that must be undertaken. 
% * Next to that, the
% mtest toolbox is programmed with the use of object oriented programming as introduced with Matlab 
% version 7.4 (2008a). This method cannot be used with matlab versions prior to 2008a.

%% Run a test with the MTestRunner
% The third way to run a test is with the use of the MTestRunner that is also used to scan the
% toolbox for testdefinitions and automatically run them. This is done in the same way as with the
% mtest object:
%
% Create an mtestengine object

mtr = MTestRunner('Template','oet');

%%
% More information about calling MTestRunner:

help MTestRunner

%%
% For automatic running test the engine can look for all tests in a particular maindir:

help MTestRunner.cataloguetests

%%
% We only want to execute one test, so we add this to the tests in the MTestRunner object:

mtr.Tests(1) = MTest('mte_simple_test');

%%
% Now we can use the run command to run the test and publish the result.

help MTestRunner.run

%%
% TODO: simple method to directly load multiple tests in the MTestRunner
% TODO: simple method to print a summary of the test info to the command window after running

##### SOURCE END #####
-->
   </body>
</html>