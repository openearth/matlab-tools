<html>

<head>
	<link href="stylesheets/style.css" rel="stylesheet" type="text/css">
	<script src="https://www.google.com/jsapi?key=ABQIAAAAVqCseOYylEg-Mc5u6LZD9xQChx54JYdgbPKio935j7RDK0bGdhSP7HZfiWq_54SIgjJ1e136ihOhBw"></Script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
	<script type="text/javascript" src="scripts/js/matlab.js"></Script>
	<script type="text/javascript" src="scripts/js/loadxmldoc.js"></script>
	<script type="text/javascript" src="scripts/js/polydraw.js"></script>
	<script type="text/javascript" src="scripts/js/soapclient.js"></script>
	<script type="text/javascript" src="scripts/js/matlabsoap.js"></script>
	<script type="text/javascript" src="scripts/js/getQueryString.js"></script>
	<script type="text/javascript" src="scripts/js/caseLoading.js"></script>
	<script type="text/javascript" src="scripts/js/kmlFunctions.js"></script>
	<script type="text/javascript" src="scripts/js/wmsFunctions.js"></script>
	<script type="text/javascript">
		var ge = null;
		var pm = null;
		var kml = null;
		var currentKmlObjects = {'':null};

		google.load("earth", "1", {'other_params': 'sensor=false' });

		// Initialize called on HTML body load
		function init()
		{
			google.earth.createInstance("map3d", initCB, failureCB);
		}

		// Initialization for Google Earth
		function initCB(instance)
		{
			ge = instance;
			// Google Earth Plugin Window Properties
			ge.getWindow().setVisibility(true);
			ge.getOptions().setStatusBarVisibility(true);
			// Google Earth Navigation Control Properties
			var navControl = ge.getNavigationControl();
			navControl.setVisibility(ge.VISIBILITY_SHOW);
			// Set starting position : The Netherlands
			var la = ge.createLookAt('');
			la.set(52.05249, 4.58105, 750000, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 0, 99.99);
			ge.getView().setAbstractView(la);
			// Polygon used for drawing the shape in Google Earth
			pm = new Polygon(0,0,0,0,document.getElementById('polygonselect').value);

			// Load requested case
			loadCase(getQuerystring('program'),getQuerystring('case'),getQuerystring('subcase'),'data');

		}

	    // If Google Earth fails to load this function captures the Error Code
		function failureCB(errorCode){}

		function AnyTimePicker(){
		AnyTime.picker( "field1",
		   { format: "%W, %M %D in the Year %z %E", firstDOW: 1 } );
		AnyTime.picker( "field2",
		   { format: "%W, %M %D in the Year %z %E", firstDOW: 1 } );
		}
	</script>

</head>

<body onload='init()' id='body'>
<h1>OpenEarth Viewer</h1>

<div style='float:left; width:350px; height:700px; overflow:auto'>
<a href="index.html"><img src="images\backbut.png" border="0"> Back to portal</a>
  <table style='font-size:small'>

<!-- CASE HEADER -->
<tr><td colspan="3"><hr /><hr /></td></tr>
    <tr>
        <td colspan="3" style="font-size: 14pt; text-transform: uppercase; color: #336699; font-weight: bold">
        <div id="case_title"></div>
        </td>
    </tr>

<!-- HYPERLINKS -->
    <tr class="links">
        <td style="font-weight: bold;" width="116">Data</td>
		<td width="117">
		<script type="text/javascript">
		document.write("<a href= 'models.html?program=" + getQuerystring('program') +"&case=" + getQuerystring('case') +"&subcase=" + getQuerystring('subcase') +"'>Models</a>");
		</script>
		</td>
		<td width="117">
		<script type="text/javascript">
		document.write("<a href= 'tools.html?program=" + getQuerystring('program') +"&case=" + getQuerystring('case') +"&subcase=" + getQuerystring('subcase') +"'>Tools</a>");
		</script>
		</td>
   	</tr>

<tr><td colspan="3"><hr /><hr /></td></tr>

<!-- DATA SELECTION -->
	<tr>
	    <td colspan="3">
	    <h3>Available sources</h3>
	    <p>
	    <div id="kml_sources"></div>
	    </p>
	    Do you want to add sources? Submit your request to the case manager!
	    <hr />
	    </td>
	</tr>

<!-- DRAWING TOOLS -->
	<tr>
		<td colspan="3">
			<h3>Drawing</h3>
		</td>
	</tr>
	<tr>
		<td>
			<form id="polyShape" action='javascript:void(0);'>
			<select name="polygon" id="polygonselect" onchange='pm.numsides = this.value; pm.drawPolygon()' class="s">
				<option value="2" class="vs">Line</option>
				<option value="3" class="vs">Triangle</option>
				<option value="4" class="vs">Square</option>
				<option value="5" class="vs">Pentagon</option>
				<option value="6" class="vs">Hexagon</option>
				<option value="7" class="vs">Heptagon</option>
				<option value="8" class="vs">Octagon</option>
				<option value="9" class="vs">Nonagon</option>
				<option value="10" class="vs">Decagon</option>
				<option value="11" class="vs">Hendecagon</option>
				<option value="12" class="vs">Dodecagon</option>
				<option value="25" class="vs">Circle</option>
			</select>
			</form>
		</td>
		<td colspan="2">
		Use ctrl + mouse click to draw
		</td>
	</tr>
	<tr><td colspan="3"><hr /></td></tr>

<!-- ACTION SELECTION -->
	<tr>
	  <td colspan="3">
		<h3>Actions</h3>
	  </td>
	</tr>
    <tr>
      <td>
 		<button style="width:120;height:25" name="Interpoleer" value="Interpoleer" onClick="javascript:CallMatLabInterpolate(kmlForInterpolation.value);">Interpolate</button>
 	  </td>
 	  <td colspan="2">
 	    <select name="kmlForInterpolation" id="kmlForInterpolation" class="s" style="width: 170px">
 	    	<option value="0" class="vs">Select case</option>
		</select>
	  </td>
	</tr>
	<tr>
      <td>
 		<button style="width:120;height:25" name="Multitile" value="Multitile" onClick="javascript:CallMatLabMultitile();">Multitile</button>
 	  </td>
	  <td>
 	    <select name="kmlForMultitile" id="kmlForMultitile" class="s" style="width: 170px">
 	    	<option value="0" class="vs">Select case</option>
		</select>
	  </td>
	</tr>
</table>
</div>
<div id='map3d_container' style='border: 1px solid silver; height: 700px; margin-left:350px;'>
	<div id='map3d' style='height: 100%;'></div>
</div>
<hr/>
    This tool is provided by: <br />
	<a href="http://openearth.eu" target="_blank"><img src="images/oet.png" align="left" width="100" border="0"/></a>
</body>

</html>
