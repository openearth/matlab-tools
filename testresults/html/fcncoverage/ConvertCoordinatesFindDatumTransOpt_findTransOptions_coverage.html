<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Function details for ConvertCoordinatesFindDatumTransOpt>findTransOptions</title>
<link type="text/css" href="script/css/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
<link type="text/css" href="script/css/FunctionCoverage.css" rel="stylesheet" />
<script type="text/javascript" src="script/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="script/js/jquery-ui-1.7.2.custom.min.js"></script>
<script type="text/javascript" src="script/js/matlab2accordion.js"></script>
</head>
<body>
<h2 class="ui-widget-header ui-state-active ui-corner-all">ConvertCoordinatesFindDatumTransOpt>findTransOptions</h2>
<div class="ui-widget-content ui-corner-all">
<strong>Coverage results</strong><br/>
<table border=0 cellspacing=0 cellpadding=6>
<tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td>
<td class="td-linebottomrt">66</td></tr>
<tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td>
<td class="td-linebottomrt">21</td></tr>
<tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td>
<td class="td-linebottomrt">45</td></tr>
<tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td>
<td class="td-linebottomrt">20</td></tr>
<tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td>
<td class="td-linebottomrt">25</td></tr>
<tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td>
<td class="td-linebottomrt">44.44 %</td></tr>
</table>
</div><br/>
<div class="ui-widget-content ui-corner-all">
<strong>Function listing</strong><br/>
<pre>
<span style="color: #FF0000; font-weight: bold; text-decoration: none">  time</span> <span style="color: #0000FF; font-weight: bold; text-decoration: none">  calls</span> <span style="font-weight: bold; text-decoration: none">line</span><br/>
               <span style="color: #A0A0A0"> 113</span> <span style="color: #A0A0A0; background: #FFFFFF;">function [ OPT,ind,direction,ind_alt,dir_alt,dep_alt] = findTransOptions(OPT,STD,geogcrs_code1,geogcrs_code2,datum_trans)</span>
               <span style="color: #A0A0A0"> 114</span> <span style="color: #228B22; background: #FFFFFF;">% find available transformation options</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 115</a></span> <span style="color: #000000; background: #E0E0FF;">ind   = find(STD.coordinate_operation.source_crs_code == geogcrs_code1 &amp;... </span>
               <span style="color: #A0A0A0"> 116</span> <span style="color: #000000; background: #E0E0FF;">    STD.coordinate_operation.target_crs_code == geogcrs_code2);</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 117</a></span> <span style="color: #000000; background: #E0E0FF;">direction(1:length(ind)) = {'normal'}; </span>
               <span style="color: #A0A0A0"> 118</span> <span style="color: #228B22; background: #FFFFFF;"></span>
               <span style="color: #A0A0A0"> 119</span> <span style="color: #228B22; background: #FFFFFF;">% also look for reverse operations</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 120</a></span> <span style="color: #000000; background: #E0E0FF;">ind_r = find(STD.coordinate_operation.source_crs_code == geogcrs_code2 &amp;... </span>
               <span style="color: #A0A0A0"> 121</span> <span style="color: #000000; background: #E0E0FF;">    STD.coordinate_operation.target_crs_code == geogcrs_code1);</span>
               <span style="color: #A0A0A0"> 122</span> <span style="color: #228B22; background: #FFFFFF;"></span>
               <span style="color: #A0A0A0"> 123</span> <span style="color: #228B22; background: #FFFFFF;">% check if found methods are reversible, only then add them to list 'ind'</span>
               <span style="color: #A0A0A0"> 124</span> <span style="color: #228B22; background: #FFFFFF;">% of possibilities.</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 125</a></span> <span style="color: #000000; background: #E0E0FF;">reverse_method_codes = STD.coordinate_operation.coord_op_method_code(ind_r); </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 126</a></span> <span style="color: #000000; background: #E0E0FF;">for ii = 1:length(reverse_method_codes) </span>
               <span style="color: #A0A0A0"> 127</span> <span style="color: #A0A0A0; background: #FFFFFF;">    if strcmpi('TRUE',STD.coordinate_operation_method.reverse_op(ii))</span>
               <span style="color: #A0A0A0"> 128</span> <span style="color: #A0A0A0; background: #FFFFFF;">        ind(end+1) = ind_r(ii);</span>
               <span style="color: #A0A0A0"> 129</span> <span style="color: #A0A0A0; background: #FFFFFF;">        direction(end+1) = {'reverse'};</span>
               <span style="color: #A0A0A0"> 130</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span>
               <span style="color: #A0A0A0"> 131</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span>
               <span style="color: #A0A0A0"> 132</span> <span style="color: #228B22; background: #FFFFFF;"></span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 133</a></span> <span style="color: #000000; background: #E0E0FF;">ind_alt = ind; </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 134</a></span> <span style="color: #000000; background: #E0E0FF;">dir_alt = direction; </span>
               <span style="color: #A0A0A0"> 135</span> <span style="color: #228B22; background: #FFFFFF;"></span>
               <span style="color: #A0A0A0"> 136</span> <span style="color: #228B22; background: #FFFFFF;">% check if found methods are deprecated</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 137</a></span> <span style="color: #000000; background: #E0E0FF;">dep_alt = STD.coordinate_operation.deprecated(ind_alt); </span>
               <span style="color: #A0A0A0"> 138</span> <span style="color: #228B22; background: #FFFFFF;"></span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 139</a></span> <span style="color: #000000; background: #E0E0FF;">if ~isempty(OPT.(datum_trans).code) </span>
               <span style="color: #A0A0A0"> 140</span> <span style="color: #228B22; background: #FFFFFF;">    % user has defined input</span>
               <span style="color: #A0A0A0"> 141</span> <span style="color: #A0A0A0; background: #FFFFFF;">    ii = find(STD.coordinate_operation.coord_op_code(ind_alt) == OPT.(datum_trans).code);</span>
               <span style="color: #A0A0A0"> 142</span> <span style="color: #A0A0A0; background: #FFFFFF;">    if isempty(ii)</span>
               <span style="color: #A0A0A0"> 143</span> <span style="color: #A0A0A0; background: #FFFFFF;">        error([sprintf(['user defined transformation code ''%d'' is not supported.\n'...</span>
               <span style="color: #A0A0A0"> 144</span> <span style="color: #A0A0A0; background: #FFFFFF;">                       'choose from available options:\n'],OPT.(datum_trans).code),...</span>
               <span style="color: #A0A0A0"> 145</span> <span style="color: #A0A0A0; background: #FFFFFF;">               sprintf('                     ''%d''\n',STD.coordinate_operation.coord_op_code(ind_alt))]);</span>
               <span style="color: #A0A0A0"> 146</span> <span style="color: #228B22; background: #FFFFFF;">    else</span>
               <span style="color: #A0A0A0"> 147</span> <span style="color: #A0A0A0; background: #FFFFFF;">              ind = ind_alt(ii);</span>
               <span style="color: #A0A0A0"> 148</span> <span style="color: #A0A0A0; background: #FFFFFF;">        direction = dir_alt{ii}; </span>
               <span style="color: #A0A0A0"> 149</span> <span style="color: #228B22; background: #FFFFFF;">        % if method is deprected, give a warning</span>
               <span style="color: #A0A0A0"> 150</span> <span style="color: #A0A0A0; background: #FFFFFF;">        if strcmpi(dep_alt{ii},'TRUE')</span>
               <span style="color: #A0A0A0"> 151</span> <span style="color: #A0A0A0; background: #FFFFFF;">            disp('Warning: The user defined datum transformation method is deprecated')</span>
               <span style="color: #A0A0A0"> 152</span> <span style="color: #A0A0A0; background: #FFFFFF;">        end</span>
               <span style="color: #A0A0A0"> 153</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span>
               <span style="color: #A0A0A0"> 154</span> <span style="color: #228B22; background: #FFFFFF;"></span>
               <span style="color: #A0A0A0"> 155</span> <span style="color: #228B22; background: #FFFFFF;">% If no method has been defined by user, use the method found.</span>
               <span style="color: #A0A0A0"> 156</span> <span style="color: #228B22; background: #FFFFFF;">% If more options are found, use the method with the highest code that is</span>
               <span style="color: #A0A0A0"> 157</span> <span style="color: #228B22; background: #FFFFFF;">% not deprecated (it is assumed this value is the newest/best method)</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 158</a></span> <span style="color: #228B22; background: #FFFFFF;">else </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 159</a></span> <span style="color: #000000; background: #E0E0FF;">    if length(ind_alt)&gt;1 </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 160</a></span> <span style="color: #000000; background: #E0E0FF;">        ii = 1:length(ind_alt); </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 161</a></span> <span style="color: #000000; background: #E0E0FF;">        ii = ii(strcmpi(dep_alt,'FALSE')); </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 162</a></span> <span style="color: #000000; background: #E0E0FF;">        [tmp,jj] = max(STD.coordinate_operation.coord_op_code(ind_alt(ii))); </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 163</a></span> <span style="color: #000000; background: #E0E0FF;">        ii = ii(jj); </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 164</a></span> <span style="color: #000000; background: #E0E0FF;">        if isempty(ii) % then ignore deprection </span>
               <span style="color: #A0A0A0"> 165</span> <span style="color: #A0A0A0; background: #FFFFFF;">            [tmp,ii] = max(STD.coordinate_operation.coord_op_code(ind_alt));</span>
               <span style="color: #A0A0A0"> 166</span> <span style="color: #A0A0A0; background: #FFFFFF;">            disp('Warning: The datum transformation method is deprecated; no non deprected methods are available')</span>
               <span style="color: #A0A0A0"> 167</span> <span style="color: #A0A0A0; background: #FFFFFF;">        end</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 168</a></span> <span style="color: #000000; background: #E0E0FF;">        ind = ind_alt(ii); </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 169</a></span> <span style="color: #000000; background: #E0E0FF;">        direction = dir_alt{ii}; </span>
               <span style="color: #A0A0A0"> 170</span> <span style="color: #A0A0A0; background: #FFFFFF;">    elseif length(ind_alt)==1</span>
               <span style="color: #A0A0A0"> 171</span> <span style="color: #A0A0A0; background: #FFFFFF;">        ind = ind_alt;</span>
               <span style="color: #A0A0A0"> 172</span> <span style="color: #A0A0A0; background: #FFFFFF;">        direction = direction{1};</span>
               <span style="color: #A0A0A0"> 173</span> <span style="color: #A0A0A0; background: #FFFFFF;">        if strcmpi(dep_alt{1},'TRUE')</span>
               <span style="color: #A0A0A0"> 174</span> <span style="color: #A0A0A0; background: #FFFFFF;">            disp('Warning: The datum transformation method is deprecated; no non deprected methods are available')</span>
               <span style="color: #A0A0A0"> 175</span> <span style="color: #A0A0A0; background: #FFFFFF;">        end</span>
               <span style="color: #A0A0A0"> 176</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 177</a></span> <span style="color: #000000; background: #E0E0FF;">end </span>
       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"><a> 178</a></span> <span style="color: #000000; background: #E0E0FF;">end </span>
</pre>
</div>
</body>
</html>
